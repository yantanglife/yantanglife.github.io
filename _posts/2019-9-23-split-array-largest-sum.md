---
layout: post
title:  "Split Array Largest Sum"
date:   2019-9-23 12:00:00
categories: Algorithm
tags: LeetCode Cpp Dichotomy
permalink: /archivers/LargestSum
comments: true
---
## æè¿°
ç»™å®šä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„å’Œä¸€ä¸ªæ•´æ•°Â mï¼Œä½ éœ€è¦å°†è¿™ä¸ªæ•°ç»„åˆ†æˆÂ mÂ ä¸ªéç©ºçš„è¿ç»­å­æ•°ç»„.

è®¾è®¡ä¸€ä¸ªç®—æ³•ä½¿å¾—è¿™Â mÂ ä¸ªå­æ•°ç»„å„è‡ªå’Œçš„æœ€å¤§å€¼æœ€å°.
<!--more-->

**æ³¨æ„:**

æ•°ç»„é•¿åº¦Â nÂ æ»¡è¶³ä»¥ä¸‹æ¡ä»¶:

* 1 â‰¤ n â‰¤ 1000
* 1 â‰¤ m â‰¤ min(50, n)

## ç¤ºä¾‹

**è¾“å…¥:**

nums = [7, 2, 5, 10, 8]

m = 2

**è¾“å‡º:**

18

**è§£é‡Š:**

ä¸€å…±æœ‰å››ç§æ–¹æ³•å°† nums åˆ†å‰²ä¸º 2 ä¸ªå­æ•°ç»„.

å…¶ä¸­æœ€å¥½çš„æ–¹å¼æ˜¯å°†å…¶åˆ†ä¸º [7, 2, 5] å’Œ [10, 8]ï¼Œ
å› ä¸ºæ­¤æ—¶è¿™ä¸¤ä¸ªå­æ•°ç»„å„è‡ªçš„å’Œçš„æœ€å¤§å€¼ä¸º 18ï¼Œåœ¨æ‰€æœ‰æƒ…å†µä¸­æœ€å°.

## åˆ†æ

**äºŒåˆ†**

~~*ä¸ä¼šï¼Œç­”æ¡ˆè¿˜æ²¡çœ‹æ‡‚*.~~    ğŸ˜¤

**å…ˆç®€å•æ¢³ç†ä¸€ä¸‹**

`low` åˆå€¼ä¸º `max(nums)`ï¼Œ`high` åˆå€¼ä¸º `sum(nums)`.

`mid = (low + high) / 2`ï¼Œæ˜¾ç„¶ä¸æ˜¯ `nums` ä¸­çš„æ•°.

å‡½æ•° `left(nums, target, m)`ï¼Œå…¶åŠŸèƒ½æ˜¯å¯¹äºç»™å®šçš„ `target=mid`ï¼Œ
éå† `nums`ï¼Œå½“ç¬¬ä¸€ä¸ªå­æ•°ç»„çš„ç´¯å’Œå¤§äº `target` æ—¶ï¼Œå¾€åæ¥ç€è®¡ç®—ç¬¬äºŒä¸ªå­æ•°ç»„çš„ç´¯å’Œï¼Œ
ç›´åˆ°å…¶å€¼å†æ¬¡å¤§äº `target`ï¼Œä¾æ­¤ï¼Œå¦‚æœè¿™æ ·çš„å­æ•°ç»„ä¸ªæ•°è¾¾åˆ°äº† `m` ä¸ªï¼Œè¿”å› `False`ï¼Œ
å³è¡¨ç¤º `target` çš„å€¼ä¼¼ä¹æ˜¯å–å°äº†ï¼Œ`target` çš„å€¼åº”è¯¥è¦æ›´å¤§ä¸€äº›æ‰å¯¹.
åä¹‹ï¼Œè¿”å› `True`ï¼Œåˆ™è¡¨ç¤º `target` çš„å€¼éœ€è¦å–å°ä¸€äº›.

ä¸ä¹‹ç›¸å¯¹åº”çš„åˆ™æ˜¯æ›´æ–° `low` å’Œ `high`.
è‹¥ `target=mid` çš„å€¼åå°ï¼Œæ›´æ–° `low = mid + 1`ï¼›
å¦åˆ™ï¼Œæ›´æ–° `high = mid`. 

ç›´åˆ° `low = high`ï¼Œè€Œ**è¯¥å€¼å³ä¸ºæ‰€æ±‚**.

***

**å’¦ï¼Œæ¢³ç†å®Œå¥½åƒå°±æ‡‚äº†**   ğŸ˜…

`low` å’Œ `high` ç¡®å®šäº†åˆ†å‰²æ–¹æ¡ˆä¸­æ•°ç»„ç´¯å’Œæœ€å¤§å€¼çš„å–å€¼èŒƒå›´.

è€Œæœ€ä½³åˆ†å‰²æ–¹æ¡ˆçš„å€¼æ˜¯ç¡®å®šçš„.

ç°åœ¨è¦åšçš„å°±æ˜¯é‡‡ç”¨äºŒåˆ†æ³•ä¸æ–­åœ°ç¼©å°è¿™ä¸ªå–å€¼èŒƒå›´.

å–ç´¯å’Œæœ€å¤§å€¼ä¸º `mid`ï¼Œ é€šè¿‡å‡½æ•° `left()`ï¼Œ
æ¥åˆ¤æ–­è¿™ä¸ªå€¼æ˜¯å¤§æ˜¯å°ï¼Œä»¥æ­¤ç¼©å°å–å€¼èŒƒå›´ï¼Œè¿­ä»£è®¡ç®—ï¼Œç›´åˆ°æœ€åå¾—åˆ°ç»“æœ.

*ä¸è¿‡ï¼Œåœ¨ `left()` ä¸­æœ‰ä¸€ä¸ªç–‘ç‚¹ï¼Œå½“ `total > target` æ—¶ï¼Œéœ€è¦é‡ç½® `total`ï¼Œ
ä¸ºä»€ä¹ˆæ˜¯ `total=e`ï¼Œè€Œä¸æ˜¯ `total=0`ï¼Ÿ*

`total > target`ï¼Œå½“å‰å­æ•°ç»„ `[..., e]` è¶…è¿‡äº†é™åˆ¶ï¼Œ
éœ€è¦ä»å½“å‰å…ƒç´  `e` å¼€å§‹é‡æ–°è®¡ç®—ä¸€ä¸ªæ–°çš„å­æ•°ç»„ `[e, ...]`.

### ç®—æ³•å¤æ‚åº¦

**æ—¶é—´å¤æ‚åº¦ä¸º**
*`O(nâˆ—log(sumÂ ofÂ array))`*

äºŒåˆ†æœç´¢çš„æ—¶é—´å¤æ‚åº¦ä¸º *`O(log(sum of array))`*ï¼Œ
å…¶ä¸­ *`sum of array`* æ˜¯ *`nums`* ä¸­æ‰€æœ‰å…ƒç´ ä¹‹å’Œ.
æ¯æ¬¡è®¡ç®—éœ€è¦éå†ä¸€é *`nums`*ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º *`O(n)`*.

**ç©ºé—´å¤æ‚åº¦**ä¸º *`O(1)`*

## ä»£ç 
```cpp
class Solution {
public:
    int splitArray(vector<int>& nums, int m) {
        long lo = 0, hi = 0;
        // lo ä¸º nums æ•°ç»„ä¸­çš„æœ€å¤§å€¼ï¼Œhi ä¸º nums ç´¯å’Œ.
        for (auto e : nums) {
            lo = max(lo, (long)e);
            hi += e;
        }
        
        if (nums.size() == 1) return hi;
        if (nums.size() == m) return lo;
        
        while (lo < hi) {
            int mid = lo + (hi - lo >> 1);
            if (left(nums, mid, m)) { // æ˜¯å¦éœ€è¦å‘å·¦çŒœæµ‹
                hi = mid;
            } else {
                lo = mid + 1;
            }
        }
        return lo;
    }
    
    bool left(vector<int>& nums, int target, int m) {
        int count = 1, total = 0;
        for (auto e : nums) {
            total += e;
            if (total > target) {
                ++count;
                if (count > m) {
                    return false;
                }
                total = e;
            }
        }
        return true;
    }
};
```

## å‚è€ƒ
[LeetCode-410. åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼](https://leetcode-cn.com/problems/split-array-largest-sum/)